---
title: 浏览器重排与重绘
date: 2021-03-10 20:49:44
tags: [chrome]
categories: Chrome
---

### 重排、重绘与合成
结合渲染流程图来理解一下浏览器的重排、重绘和合成的执行过程。

#### 重排
重排是指更新了浏览器的几何位置
{% img /images/chrome/render/render1.png "点击查看大图:vi/vim-cheat-sheet" %}

通过上图可以看出，通过javascript或者css改变了元素的几何属性，浏览器会触发重新布局，解析之后的一系列的阶段，这个过程就叫重排。
重排需要更新完整的渲染流水线，开销是最大的。

#### 重绘
重绘是指更新元素的绘制属性
{% img /images/chrome/render/render2.png "点击查看大图:vi/vim-cheat-sheet" %}

通过上图可以看出，修改了元素的背景颜色，由于并没有引起元素几何属性的变化，所以直接进入了绘制阶段，然后执行之后的一系列的阶段，这个过程叫重绘。
重绘省去了布局和分层阶段，所以执行效率要比重排要高一些。


#### 合成
直接合成阶段
{% img /images/chrome/render/render3.png "点击查看大图:vi/vim-cheat-sheet" %}
通过上图可以看出，使用css的transform来实现动画效果，渲染引擎跳过布局和绘制，只执行后续的合成操作，这个过程叫合成。
合成省去了布局、分层和绘制的阶段，直接在非主线程上执行合成动画，执行效率是最高的。

